pipeline {
    agent any
    triggers {
        GenericTrigger(
			genericVariables: [
				[key: 'action', value: '$.action'],
				[key: 'label', value: '$.pull_request.base.label'],
				[key: 'merged', value: '$.pull_request.merged']
			],
            token: 'masterPipeline',
            printContributedVariables: true,
            printPostContent: true,
			regexpFilterText: '$action@@$label@@$merged',
			regexpFilterExpression: 'closed@@master@@true'
        )
    }
    stages {
        stage('Build') {
            steps {
                echo 'build master branch'
            }
        }
        stage('API_Test') {
            steps{
                echo 'APT test Area...'
            }
        }
    }
    post{
        always{
            echo 'This will always be executed!'
        }
        success{
            echo 'This workflow is successful!'
        }
        failure{
            echo 'This workflow is failed!'
        }
    }
}